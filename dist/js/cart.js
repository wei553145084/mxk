"use strict";var un=localStorage.getItem("username");function showCart(){$.ajax({url:"../../server/interface/showlist.php",dataType:"json",success:function(t){$.each(t.data,function(t,e){$("table").append("\n\t\t\t\t\t<tr >\n\t\t\t\t\t\t<td>".concat(e.product_id,"</td>\n\t\t\t\t\t\t<td>").concat(e.product_name,'</td>\n\t\t\t\t\t\t<td><img src="').concat(e.product_img,'" alt="" width="150px" height="100px" style="margin: 5px 0;"></td>\n\t\t\t\t\t\t<td>￥').concat(e.product_price,'</td>\n\t\t\t\t\t\t<td><button class="cutNum">-</button><input type="text" id=').concat(e.product_id,' style="width: 40px;padding-left:10px;height:26px;margin:0 10px;" class="num" value=').concat(e.product_num,' /><button class="addNum ">+</button></td>\n\t\t\t\t\t\t<td><button class="delProduct" style="width: 100px;height: 50px;background-color: #2295fe;color: #f1f1f1;border: 1px #00A5E3 solid;">删除该商品</button></td>\n\t\t\t\t\t</tr>\n\t\t            '))})}})}null==un?location.href="login.html":($("#username").text("欢迎您： "+un),$(".li_1").css({"border-left":"1px solid #f3f3f3"})),$(".logout").click(function(){localStorage.removeItem("username"),location.href="login.html"}),showCart(),$("body").on("click",".delProduct",function(){var t=$(this).parent().parent().children().eq(0).html();$.ajax({url:"../../server/interface/delwq.php",data:{id:t},dataType:"json",success:function(t){t.code&&(showCart(),location.href="../pages/cart.html")}})}),$("body").on("click",".addNum",function(){var e=$(this).parent().parent().children().eq(0).html();$.ajax({method:"post",url:"../../server/interface/updatewq.php",dataType:"json",data:{type:"add",id:e},success:function(t){t.code&&(e="#"+e,$(e).val(t.num))}})}),$("body").on("click",".cutNum",function(){var e=$(this).parent().parent().children().eq(0).html();$.ajax({method:"post",url:"../../server/interface/updatewq.php",dataType:"json",data:{type:"cut",id:e},success:function(t){t.code&&(e="#"+e,$(e).val(t.num))}})});